<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Migrating a validator | Desmos Docs</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/assets/logo.png">
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/pwa/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/pwa/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/pwa/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/pwa/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/pwa/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/pwa/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/pwa/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/pwa/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/pwa/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/assets/pwa/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/pwa/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/assets/pwa/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/pwa/favicon-16x16.png">
    <link rel="manifest" href="/assets/pwa/manifest.json">
    <meta name="description" content="Documentation for the Desmos blockchain.">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta property="og:title" content="Desmos Documentation">
    <meta property="og:url" content="https://docs.desmos.network/">
    <meta property="og:description" content="Learn how to integrate with the Desmos blockchain">
    <meta property="og:image" content="https://docs.desmos.network/assets/logo.png">
    <meta roperty="og:type" content="website">
    <meta property="og:locale" content="en_US">
    
    <link rel="preload" href="/assets/css/0.styles.5341f6db.css" as="style"><link rel="preload" href="/assets/js/app.a8706a45.js" as="script"><link rel="preload" href="/assets/js/2.d405f95a.js" as="script"><link rel="preload" href="/assets/js/80.0258fe4b.js" as="script"><link rel="prefetch" href="/assets/js/10.34c365b9.js"><link rel="prefetch" href="/assets/js/11.7bf34141.js"><link rel="prefetch" href="/assets/js/12.784468b8.js"><link rel="prefetch" href="/assets/js/13.7493e4b8.js"><link rel="prefetch" href="/assets/js/14.706b425f.js"><link rel="prefetch" href="/assets/js/15.f34f54a2.js"><link rel="prefetch" href="/assets/js/16.7a4262d2.js"><link rel="prefetch" href="/assets/js/17.f41e4d41.js"><link rel="prefetch" href="/assets/js/18.9af717b8.js"><link rel="prefetch" href="/assets/js/19.56559ee6.js"><link rel="prefetch" href="/assets/js/20.e90f90fd.js"><link rel="prefetch" href="/assets/js/21.a07d7a4f.js"><link rel="prefetch" href="/assets/js/22.550d7d64.js"><link rel="prefetch" href="/assets/js/23.9dfcd7d8.js"><link rel="prefetch" href="/assets/js/24.12dc37bd.js"><link rel="prefetch" href="/assets/js/25.7a4bb17a.js"><link rel="prefetch" href="/assets/js/26.e3c85f39.js"><link rel="prefetch" href="/assets/js/27.9b44cc0d.js"><link rel="prefetch" href="/assets/js/28.fbab7a92.js"><link rel="prefetch" href="/assets/js/29.091cdc91.js"><link rel="prefetch" href="/assets/js/3.9906b63a.js"><link rel="prefetch" href="/assets/js/30.f8865853.js"><link rel="prefetch" href="/assets/js/31.b9a04cf1.js"><link rel="prefetch" href="/assets/js/32.a531ab0e.js"><link rel="prefetch" href="/assets/js/33.7fcecfae.js"><link rel="prefetch" href="/assets/js/34.dc29368a.js"><link rel="prefetch" href="/assets/js/35.c636e28c.js"><link rel="prefetch" href="/assets/js/36.adb958de.js"><link rel="prefetch" href="/assets/js/37.ee86f0a8.js"><link rel="prefetch" href="/assets/js/38.82314b70.js"><link rel="prefetch" href="/assets/js/39.2ee61576.js"><link rel="prefetch" href="/assets/js/4.3675dc09.js"><link rel="prefetch" href="/assets/js/40.7cda6bda.js"><link rel="prefetch" href="/assets/js/41.a302aaa5.js"><link rel="prefetch" href="/assets/js/42.e43b38b9.js"><link rel="prefetch" href="/assets/js/43.ef63bda0.js"><link rel="prefetch" href="/assets/js/44.ce62cd10.js"><link rel="prefetch" href="/assets/js/45.c17d0284.js"><link rel="prefetch" href="/assets/js/46.b0264b6e.js"><link rel="prefetch" href="/assets/js/47.d1292cf0.js"><link rel="prefetch" href="/assets/js/48.cf150b24.js"><link rel="prefetch" href="/assets/js/49.fbe3ea81.js"><link rel="prefetch" href="/assets/js/5.eb28b176.js"><link rel="prefetch" href="/assets/js/50.1cc2bf44.js"><link rel="prefetch" href="/assets/js/51.53b055ea.js"><link rel="prefetch" href="/assets/js/52.0338f6ff.js"><link rel="prefetch" href="/assets/js/53.364df591.js"><link rel="prefetch" href="/assets/js/54.c528acdf.js"><link rel="prefetch" href="/assets/js/55.456e4cf1.js"><link rel="prefetch" href="/assets/js/56.c61206ef.js"><link rel="prefetch" href="/assets/js/57.9afa0375.js"><link rel="prefetch" href="/assets/js/58.8c0f2a71.js"><link rel="prefetch" href="/assets/js/59.d2a0285d.js"><link rel="prefetch" href="/assets/js/6.235f26ae.js"><link rel="prefetch" href="/assets/js/60.fc948aa3.js"><link rel="prefetch" href="/assets/js/61.b0c8e285.js"><link rel="prefetch" href="/assets/js/62.5fdbed16.js"><link rel="prefetch" href="/assets/js/63.c8fd1ca8.js"><link rel="prefetch" href="/assets/js/64.15895c78.js"><link rel="prefetch" href="/assets/js/65.54bd6ebb.js"><link rel="prefetch" href="/assets/js/66.74cd0cf7.js"><link rel="prefetch" href="/assets/js/67.5ecb0f6a.js"><link rel="prefetch" href="/assets/js/68.4b482845.js"><link rel="prefetch" href="/assets/js/69.ab3d15df.js"><link rel="prefetch" href="/assets/js/7.38880a59.js"><link rel="prefetch" href="/assets/js/70.1f099847.js"><link rel="prefetch" href="/assets/js/71.55bda45c.js"><link rel="prefetch" href="/assets/js/72.e3bc2fbf.js"><link rel="prefetch" href="/assets/js/73.399a60fb.js"><link rel="prefetch" href="/assets/js/74.74795cb9.js"><link rel="prefetch" href="/assets/js/75.c950a89c.js"><link rel="prefetch" href="/assets/js/76.b54788db.js"><link rel="prefetch" href="/assets/js/77.c92df20b.js"><link rel="prefetch" href="/assets/js/78.eb4fa8c5.js"><link rel="prefetch" href="/assets/js/79.ba238bd2.js"><link rel="prefetch" href="/assets/js/8.c655b1bf.js"><link rel="prefetch" href="/assets/js/81.bd523143.js"><link rel="prefetch" href="/assets/js/82.0e7a8b20.js"><link rel="prefetch" href="/assets/js/83.81a3cf3f.js"><link rel="prefetch" href="/assets/js/84.3200166e.js"><link rel="prefetch" href="/assets/js/9.344bd489.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5341f6db.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/logo.png" alt="Desmos Docs" class="logo"> <span class="site-name can-hide">Desmos Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://desmos.network" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/desmos-labs/desmos" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://desmos.network" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/desmos-labs/desmos" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Developers</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Running a Fullnode</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Validators</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/validators/overview.html" class="sidebar-link">Overview</a></li><li><a href="/validators/security.html" class="sidebar-link">Security</a></li><li><a href="/validators/setup.html" class="sidebar-link">Setup</a></li><li><a href="/validators/halting.html" class="sidebar-link">Halting</a></li><li><a href="/validators/migrating.html" aria-current="page" class="active sidebar-link">Migrating</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/validators/migrating.html#_1-setup-new-fullnode" class="sidebar-link">1. Setup new fullnode</a></li><li class="sidebar-sub-header"><a href="/validators/migrating.html#_2-migrate-data" class="sidebar-link">2. Migrate Data</a></li></ul></li><li><a href="/validators/common-problems.html" class="sidebar-link">Common problems</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Testnets</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="migrating-a-validator"><a href="#migrating-a-validator" class="header-anchor">#</a> Migrating a validator</h1> <p>In some cases, you might want to move your running validator from one server to another. For example, this might be the case if you find a cheaper alternative or if your host does not meet the requirements.</p> <p>In this case, what you need to do is following a two-step procedure:</p> <ol><li>Set and fully sync up a fullnode</li> <li>Migrate data from old node to new node</li></ol> <h2 id="_1-setup-new-fullnode"><a href="#_1-setup-new-fullnode" class="header-anchor">#</a> 1. Setup new fullnode</h2> <p>To avoid as much missed blocks as possible it is recommended that you setup a new server and fully sync up a full node first. To do this,
you can read the guide <a href="/fullnode/setup.html">here</a>.</p> <p>Proceed to step 2 only if your new node has caught up.</p> <div class="language- extra-class"><pre class="language-text"><code>desmos status 2&gt;&amp;1 | jq &quot;{catching_up: .SyncInfo.catching_up}&quot;
</code></pre></div><h2 id="_2-migrate-data"><a href="#_2-migrate-data" class="header-anchor">#</a> 2. Migrate Data</h2> <h3 id="stopping-both-the-validator-and-the-newly-synced-full-node"><a href="#stopping-both-the-validator-and-the-newly-synced-full-node" class="header-anchor">#</a> Stopping both the validator and the newly synced full node</h3> <p>In order to avoid as much side affects as possible we will be stopping both nodes.</p> <div class="language- extra-class"><pre class="language-text"><code>systemctl stop desmos
</code></pre></div><h3 id="backup-the-following-data-in-the-validator-node"><a href="#backup-the-following-data-in-the-validator-node" class="header-anchor">#</a> Backup the following data in the validator node</h3> <p>In order to properly migrate our validator node to another server we will need to backup the following data:</p> <ol><li><p>The validator private key.
This is located inside the <code>~/.desmos/config/priv_validator_key.json</code> file.</p></li> <li><p>The validator consensus state.
This is located inside the <code>~/.desmos/data/priv_validator_state.json</code> file.</p></li> <li><p>If you keep your keys on the node make sure you have the secret recovery phrase (mnemonic phrase) associated with your key(s).</p></li></ol> <div class="custom-block tip"><p class="custom-block-title">Do not delete your old node yet</p> <p>We highly suggest you to delete your old node instance once that the new node is running properly. This will allow you to recover any information if you forgot to do so.</p></div> <h3 id="migrating-data-to-the-new-fullnode"><a href="#migrating-data-to-the-new-fullnode" class="header-anchor">#</a> Migrating data to the new fullnode</h3> <p>With both nodes stopped we will be copying the backed up data in to the newly synced fullnode.</p> <div class="custom-block warning"><p class="custom-block-title">Warning</p> <p>At this point, both nodes should not be running. This is to prevent any possible side effects such as double signing</p></div> <p>Transfer the following backed up files from the old node to the new node:</p> <ul><li><code>~/.desmos/config/priv_validator_key.json</code></li> <li><code>~/.desmos/data/priv_validator_state.json</code></li></ul> <h3 id="startup-the-new-validator-node"><a href="#startup-the-new-validator-node" class="header-anchor">#</a> Startup the new validator node</h3> <p>Once you have moved your <code>priv_validator_key.json</code> and <code>priv_validator_state</code> to the newly synced fullnode, it will be recognized as the same validator node.</p> <div class="custom-block warning"><p class="custom-block-title">Warning</p> <p>The <code>priv_validator_key</code> should only be online from a single instance. A good practice would be to remove or rename the <code>priv_validator_key.json</code> in the old node so that even if you accidentally start running both nodes, the validator key would only be online for one of them.</p></div> <p>With the old validator node stopped, start up the new node:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo systemctl start desmos
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">Wait before deleting the old node</p> <p>We suggest you to wait before deleting the old node. Instead of waiting only to see the blocks syncing, make sure your new node is actually signing blocks as your validator. You will see this by looking at your validator uptime on our <a href="https://morpheus.desmos.network/validators" target="_blank" rel="noopener noreferrer">explorer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. If everything is working properly, the uptime should slowly increase.</p></div> <h3 id="optional-recover-your-key"><a href="#optional-recover-your-key" class="header-anchor">#</a> (Optional) Recover your key</h3> <p>If you originally had your key in the previous server you can easily add it back using the secret recovery phrase (mnemonic phrase) you had backed up</p> <div class="language- extra-class"><pre class="language-text"><code>desmos keys add &lt;key_name&gt; --recover
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/desmos-labs/desmos/edit/master/docs/validators/migrating.md" target="_blank" rel="noopener noreferrer">Edit this page on Github</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/9/2021, 9:34:10 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/validators/halting.html" class="prev">
        Halting
      </a></span> <span class="next"><a href="/validators/common-problems.html">
        Common problems
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a8706a45.js" defer></script><script src="/assets/js/2.d405f95a.js" defer></script><script src="/assets/js/80.0258fe4b.js" defer></script>
  </body>
</html>
