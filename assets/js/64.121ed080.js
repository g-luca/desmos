(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{418:function(e,t,o){"use strict";o.r(t);var a=o(42),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"migrating-a-validator"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#migrating-a-validator"}},[e._v("#")]),e._v(" Migrating a validator")]),e._v(" "),o("p",[e._v("In some cases, you might want to move your running validator from one server to another. For example, this might be the case if you find a cheaper alternative or if your host does not meet the requirements.")]),e._v(" "),o("p",[e._v("In this case, what you need to do is following a three steps procedure:")]),e._v(" "),o("ol",[o("li",[e._v("Stop the current running validator and backup the data.")]),e._v(" "),o("li",[e._v("Setup the new server and transfer the backed up files to it.")]),e._v(" "),o("li",[e._v("Start the new node.")])]),e._v(" "),o("h2",{attrs:{id:"_1-backup-the-data"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_1-backup-the-data"}},[e._v("#")]),e._v(" 1. Backup the data")]),e._v(" "),o("p",[e._v("In order to properly transfer your validator to another server, you first have to stop the running node. To do this, you can execute the following command:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("systemctl stop desmos\n")])])]),o("p",[e._v("Once you have done so, you need to back up the following data:")]),e._v(" "),o("ol",[o("li",[o("p",[e._v("The mnemonic phrase associated with your key."),o("br"),e._v("\nYou should have written it down on a piece of paper when you first created the node.")])]),e._v(" "),o("li",[o("p",[e._v("The validator private key."),o("br"),e._v("\nThis is located inside the "),o("code",[e._v("~/.desmos/config/priv_validator_key.json")]),e._v(" file.")])]),e._v(" "),o("li",[o("p",[e._v("The validator consensus state."),o("br"),e._v("\nThis is located inside the "),o("code",[e._v("~/.desmos/data/priv_validator_state.json")]),e._v(" file.")])])]),e._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[e._v("Do not delete your old node yet")]),e._v(" "),o("p",[e._v("We highly suggest you to delete your old node instance once that the new node is running properly. This will allow you to recover any information if you forgot to do so.")])]),e._v(" "),o("h2",{attrs:{id:"_2-setup-your-new-node"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_2-setup-your-new-node"}},[e._v("#")]),e._v(" 2. Setup your new node")]),e._v(" "),o("h3",{attrs:{id:"setting-up-the-full-node"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-the-full-node"}},[e._v("#")]),e._v(" Setting up the full node")]),e._v(" "),o("p",[e._v("Once you are ready to get your new node running, the first thing to do is setup your node as a full node. To do this,\nyou can read the guide "),o("RouterLink",{attrs:{to:"/fullnode/setup.html"}},[e._v("here")]),e._v(".")],1),e._v(" "),o("p",[e._v("Once that is done, stop your new node from running by using")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("systemctl stop desmos\n")])])]),o("p",[e._v("Now, transfer the following backed up files from the old node into the new one:")]),e._v(" "),o("ul",[o("li",[o("code",[e._v("~/.desmos/config/priv_validator_key.json")])]),e._v(" "),o("li",[o("code",[e._v("~/.desmos/data/priv_validator_state.json")])])]),e._v(" "),o("h3",{attrs:{id:"restoring-your-key"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#restoring-your-key"}},[e._v("#")]),e._v(" Restoring your key")]),e._v(" "),o("p",[e._v("To restored your validator key, all you have to do is execute the following command:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("desmos keys add <your_key_name> --recover\n")])])]),o("p",[e._v("Now, insert your mnemonic phrase and then your keyring password.")]),e._v(" "),o("h2",{attrs:{id:"_3-start-the-new-node"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_3-start-the-new-node"}},[e._v("#")]),e._v(" 3. Start the new node")]),e._v(" "),o("p",[e._v("Once everything is in place, you can start your new node. To do this, run the following commands:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("desmos unsafe-reset-all\nsudo systemctl start desmos\n")])])]),o("div",{staticClass:"custom-block warning"},[o("p",{staticClass:"custom-block-title"},[e._v("Make sure the old node is not running")]),e._v(" "),o("p",[e._v("Before starting the new node, make sure you stop the old one. If you start the new node, and the old one is still running, you will run into a double signature, and your node will be slashed of 5% of its staked amount.")]),e._v(" "),o("p",[e._v("To prevent this, stop the old server from running if possible.")])]),e._v(" "),o("p",[e._v("When you are sure your node caught up to the chain properly, you can now delete the old server instance and all the files contained inside it.")]),e._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[e._v("Wait before deleting the old node")]),e._v(" "),o("p",[e._v("We suggest you to wait before deleting the old node. Instead of waiting only to see the blocks syncing, make sure your new node is actually signing blocks as your validator. You will see this by looking at your validator uptime on our "),o("a",{attrs:{href:"https://morpheus.desmos.network/validators",target:"_blank",rel:"noopener noreferrer"}},[e._v("explorer"),o("OutboundLink")],1),e._v(". If everything is working properly, the uptime should slowly increase.")])])])}),[],!1,null,null,null);t.default=s.exports}}]);